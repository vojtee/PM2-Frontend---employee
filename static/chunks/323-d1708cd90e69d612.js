"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{1323:function(e,t,n){n.d(t,{D5:function(){return I},_Q:function(){return N},lO:function(){return j},nx:function(){return x},un:function(){return b}});var r,o,a=n(7294),l=n(3935);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function u(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}class c{static async load(e){var t;let n=e.libraries?e.libraries.split(","):[],r=this.serializeParams(e);for(let o of(null!=(t=window.google)&&null!=(t=t.maps)&&t.importLibrary||(window.__googleMapsApiParams__=r,this.initImportLibrary(e)),window.__googleMapsApiParams__&&window.__googleMapsApiParams__!==r&&console.warn("The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect."),["maps",...n]))await google.maps.importLibrary(o)}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.warn("initImportLibrary can only be called once.",e);return}let t=null,n=n=>t||(t=new Promise((t,r)=>{var o;let a=document.createElement("script"),l=new URLSearchParams;for(let[t,n]of Object.entries(e)){let e=t.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase());l.set(e,n)}l.set("libraries",n),l.set("callback","__googleMapsCallback__"),a.src="https://maps.googleapis.com/maps/api/js?"+l.toString(),window.__googleMapsCallback__=t,a.onerror=()=>r(Error("The Google Maps JavaScript API could not load.")),a.nonce=(null==(o=document.querySelector("script[nonce]"))?void 0:o.nonce)||"",document.head.append(a)}));google.maps.importLibrary=e=>n(e).then(()=>google.maps.importLibrary(e))}}let d=["onLoad","apiKey","libraries"],m=["children"];(r=o||(o={})).NOT_LOADED="NOT_LOADED",r.LOADING="LOADING",r.LOADED="LOADED",r.FAILED="FAILED";let{NOT_LOADED:g,LOADING:p,LOADED:f,FAILED:h}=o,v=a.createContext(null),b=e=>{let{children:t}=e,n=s(e,m),{mapInstances:r,addMapInstance:o,removeMapInstance:l,clearMapInstances:b}=function(){let[e,t]=(0,a.useState)({}),n=(e,n="default")=>{t(t=>i({},t,{[n]:e}))},r=(e="default")=>{t(t=>s(t,[e].map(u)))},o=()=>{t({})};return{mapInstances:e,addMapInstance:n,removeMapInstance:r,clearMapInstances:o}}(),{status:w,loadedLibraries:y,importLibrary:E}=function(e){let{onLoad:t,apiKey:n,libraries:r=[]}=e,o=s(e,d),[l,u]=(0,a.useState)(g),[m,v]=(0,a.useReducer)((e,t)=>i({},e,{[t.name]:t.value}),{}),b=(0,a.useMemo)(()=>null==r?void 0:r.join(","),[r]),w=(0,a.useMemo)(()=>JSON.stringify(o),[o]),y=(0,a.useCallback)(async e=>{var t;if(m[e])return m[e];if(!(null!=(t=google)&&null!=(t=t.maps)&&t.importLibrary))throw Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");let n=await window.google.maps.importLibrary(e);return v({name:e,value:n}),n},[]);return(0,a.useEffect)(()=>{u(p),(async()=>{try{for(let e of(await c.load(i({key:n,libraries:b},o)),u(f),["core","maps",...r]))await y(e);t&&t()}catch(e){console.error("<ApiProvider> failed to load Google Maps API",e),u(h)}})()},[n,b,w]),{status:l,loadedLibraries:m,importLibrary:y}}(n);return a.createElement(v.Provider,{value:{mapInstances:r,addMapInstance:o,removeMapInstance:l,clearMapInstances:b,status:w,loadedLibraries:y,importLibrary:E}},t)};function w(){var e;let t=(null==(e=(0,a.useContext)(v))?void 0:e.status)||o.NOT_LOADED;return t===o.LOADED}let y=new Set;function E(...e){let t=JSON.stringify(e);y.has(t)||(y.add(t),console.error(...e))}let L={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},_=["bounds_changed","center_changed","heading_changed","projection_changed","tilt_changed","zoom_changed"],C=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],k=Object.keys(L),P=["center","zoom","heading","tilt"],O=["mapId"],M=["id","initialBounds"],D=a.createContext(null),I=e=>{let{children:t,id:n,className:r,style:o,viewState:l,viewport:u}=e,c=(0,a.useContext)(v);if(!c)throw Error("<Map> can only be used inside an <ApiProvider> component.");let[d,m]=function(e,t){let n=w(),[r,o]=(0,a.useState)(null),[l,i]=function(){let[e,t]=(0,a.useState)(null),n=(0,a.useCallback)(e=>t(e),[t]);return[e,n]}(),{id:u,initialBounds:c}=e,d=s(e,M);return(0,a.useEffect)(()=>{if(!l||!n)return;let{addMapInstance:e,removeMapInstance:r}=t,a=new google.maps.Map(l,d);return o(a),e(a,u),c&&a.fitBounds(c),()=>{l&&n&&(google.maps.event.clearInstanceListeners(a),o(null),r(u))}},[u,l,n,e.mapId]),(0,a.useEffect)(()=>{if(!u)return;let{mapInstances:e}=t;e[u]&&e[u]!==r&&E(`The map id '${u}' seems to have been used multiple times. This can lead to unexpected problems when accessing the maps. Please use unique ids for all <Map> components.`)},[u,t,r]),[r,i]}(e,c),g=(0,a.useRef)({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});!function(e,t,n){let{center:r,zoom:o,heading:l,tilt:i}=n,u=s(n,P),c=r?r&&"object"==typeof r&&"lat"in r&&"lng"in r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)?r:r.toJSON():null,d=c&&c.lat,m=c&&c.lng;(0,a.useEffect)(()=>{if(!e)return;let t=s(u,O);e.setOptions(t)},[u]),(0,a.useLayoutEffect)(()=>{e&&Number.isFinite(d)&&Number.isFinite(m)&&(t.current.center.lat!==d||t.current.center.lng!==m)&&e.moveCamera({center:{lat:d,lng:m}})},[d,m]),(0,a.useLayoutEffect)(()=>{e&&Number.isFinite(o)&&t.current.zoom!==o&&e.moveCamera({zoom:o})},[o]),(0,a.useLayoutEffect)(()=>{e&&Number.isFinite(l)&&t.current.heading!==l&&e.moveCamera({heading:l})},[l]),(0,a.useLayoutEffect)(()=>{e&&Number.isFinite(i)&&t.current.tilt!==i&&e.moveCamera({tilt:i})},[i])}(d,g,e),function(e,t,n){for(let r of k){let o=n[r],l=L[r];(0,a.useEffect)(()=>{if(!e||!o)return;let n=e.addListener(l,n=>{let r=function(e,t,n){let r={type:e,map:t,detail:{},stoppable:!1,stop:()=>{}};if(_.includes(e)){let e=r,n=t.getCenter(),o=t.getZoom(),a=t.getHeading()||0,l=t.getTilt()||0,i=t.getBounds();return n&&i&&Number.isFinite(o)||console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),e.detail={center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:o,heading:a,tilt:l,bounds:(null==i?void 0:i.toJSON())||{north:90,east:180,south:-90,west:-180}},e}if(C.includes(e)){var o;if(!n)throw Error("[createEvent] mouse events must provide a srcEvent");let e=r;return e.domEvent=n.domEvent,e.stoppable=!0,e.stop=()=>n.stop(),e.detail={latLng:(null==(o=n.latLng)?void 0:o.toJSON())||null,placeId:n.placeId},e}return r}(l,e,n);(function(e,t){if(!e.detail.center)return;let{center:n,zoom:r,heading:o,tilt:a}=e.detail;t.current.center=n,t.current.heading=o,t.current.tilt=a,t.current.zoom=r})(r,t),o(r)});return()=>n.remove()},[e,t,l,o])}}(d,g,e),(0,a.useLayoutEffect)(()=>{if(!d||!l)return;d.setOptions({gestureHandling:"none",keyboardShortcuts:!1,disableDefaultUI:!0});let{latitude:e,longitude:t,bearing:n,pitch:r,zoom:o}=l;d.moveCamera({center:{lat:e,lng:t},heading:n,tilt:r,zoom:o+1})},[d,l]);let p=(0,a.useMemo)(()=>Boolean(u),[u]),f=(0,a.useMemo)(()=>i({width:"100%",height:"100%",zIndex:p?-1:0},o),[o,p]);return a.createElement("div",i({ref:m,"data-testid":"map",style:r?void 0:f,className:r},n?{id:n}:{}),d?a.createElement(D.Provider,{value:{map:d}},t):null)};I.deckGLViewProps=!0;let S=a.createContext(null),N=(0,a.forwardRef)((e,t)=>{let{children:n}=e,[r,o]=function(e){var t;let[n,r]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),i=null==(t=(0,a.useContext)(D))?void 0:t.map,s=function(e){let t=w(),n=(0,a.useContext)(v);return(0,a.useEffect)(()=>{t&&n&&n.importLibrary(e)},[t,null==n?void 0:n.importLibrary]),(null==n?void 0:n.loadedLibraries[e])||null}("marker"),{children:u,className:c,onClick:d,onDrag:m,onDragStart:g,onDragEnd:p,collisionBehavior:f,draggable:h,position:b,title:y,zIndex:E}=e,L=a.Children.count(u);return(0,a.useEffect)(()=>{if(!i||!s)return;let e=new s.AdvancedMarkerElement;if(e.map=i,r(e),L>0){let t=document.createElement("div");c&&t.classList.add(c),e.content=t,l(t)}return()=>{e.map=null,r(null),l(null)}},[i,s,L]),(0,a.useEffect)(()=>{if(n)return d&&n.addListener("click",d),m&&n.addListener("drag",m),g&&n.addListener("dragstart",g),p&&n.addListener("dragend",p),(m||g||p)&&!h&&console.warn("You need to set the marker to draggable to listen to drag-events."),()=>{google.maps.event.clearInstanceListeners(n)}},[n,h,d,g,m,p]),(0,a.useEffect)(()=>{n&&(void 0!==b&&(n.position=b),void 0!==h&&(n.gmpDraggable=h),void 0!==f&&(n.collisionBehavior=f),void 0!==E&&(n.zIndex=E),"string"==typeof y&&(n.title=y))},[n,b,h,f,E,y]),[n,o]}(e);return((0,a.useImperativeHandle)(t,()=>r,[r]),r)?a.createElement(S.Provider,{value:{marker:r}},null!==o&&(0,l.createPortal)(n,o)):null}),A=["children","anchor","onCloseClick"],x=e=>{var t;let{children:n,anchor:r,onCloseClick:o}=e,i=s(e,A),u=null==(t=(0,a.useContext)(D))?void 0:t.map,[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!u)return;let e=new google.maps.InfoWindow(i),t=document.createElement("div");return e.setContent(t),e.open({map:u,anchor:r}),o&&e.addListener("closeclick",()=>{o()}),d(t),()=>{google.maps.event.clearInstanceListeners(e),e.close(),t.remove(),d(null)}},[u,n,r]),a.createElement(a.Fragment,null,null!==c&&(0,l.createPortal)(n,c))},T=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];(0,a.forwardRef)((e,t)=>{let n=function(e){var t;let[n,r]=(0,a.useState)(null),o=null==(t=(0,a.useContext)(D))?void 0:t.map,{onClick:l,onDrag:i,onDragStart:u,onDragEnd:c,onMouseOver:d,onMouseOut:m}=e,g=s(e,T),{position:p,draggable:f}=g;return(0,a.useEffect)(()=>{if(!o){void 0===o&&console.error("<Marker> has to be inside a Map component.");return}let e=new google.maps.Marker(g);return e.setMap(o),r(e),()=>{e.setMap(null),r(null)}},[o]),(0,a.useEffect)(()=>{if(n)return l&&n.addListener("click",l),i&&n.addListener("drag",i),u&&n.addListener("dragstart",u),c&&n.addListener("dragend",c),d&&n.addListener("mouseover",d),m&&n.addListener("mouseout",m),n.setDraggable(Boolean(f)),()=>{google.maps.event.clearInstanceListeners(n)}},[n,f,l,i,u,c,d,m]),(0,a.useEffect)(()=>{n&&g&&n.setOptions(g)},[n,g]),(0,a.useEffect)(()=>{!f&&p&&n&&n.setPosition(p)},[f,p,n]),n}(e);return(0,a.useImperativeHandle)(t,()=>n,[n]),a.createElement(a.Fragment,null)});let j=e=>{var t;let n=null==(t=(0,a.useContext)(S))?void 0:t.marker,r=(0,a.useMemo)(()=>document.createElement("div"),[]);return(0,a.useEffect)(()=>{if(!n){void 0===n&&console.error("The <Pin> component can only be used inside <AdvancedMarker>.");return}e.glyph&&e.children&&E("The <Pin> component only uses children to render the glyph if both the glyph property and children are present."),a.Children.count(e.children)>1&&E("Passing multiple children to the <Pin> component might lead to unexpected results.");let t=i({},e),o=new google.maps.marker.PinElement(t);e.children&&(o.glyph=r),n.content=o.element},[n,e]),(0,l.createPortal)(e.children,r)}}}]);